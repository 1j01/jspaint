<!DOCTYPE html>
<!-- saved from url=(0092)https://rawgit.com/brendankenny/libtess.js/gh-pages/examples/simple_triangulation/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Simple Triangulation</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background: #58548e;
      }
      #poly-view {
        image-rendering: optimizeSpeed;             /* STOP SMOOTHING, GIVE ME SPEED  */
        image-rendering: -moz-crisp-edges;          /* Firefox                        */
        image-rendering: -o-crisp-edges;            /* Opera                          */
        image-rendering: -webkit-optimize-contrast; /* Chrome (and eventually Safari) */
        image-rendering: pixelated; /* Chrome */
        image-rendering: optimize-contrast;         /* CSS3 Proposed                  */
        -ms-interpolation-mode: nearest-neighbor;   /* IE8+                           */
      }
    </style>

    <script src="./lib/libtess.min.js"></script>
    <script src="./src/webgl-draw.js"></script>
    <script src="./src/triangulate.js"></script>
    <script>
      /* global draw, initArrayBuffer, initWebGL, triangulate */

      var filledMode = true;

      var NUM_VERTS = 500;
      var contours;
      var polyTriangles;

      function init() {
        var polygonFillCanvas = document.getElementById('poly-view');

        initWebGL(polygonFillCanvas);

        contours = [
          new Float32Array(generateFunkyFreshLoop(NUM_VERTS, true, 0.5, 0.5)),
          new Float32Array(generateFunkyFreshLoop(NUM_VERTS, false, 14, 3))
        ];
        
        polyTriangles = triangulate(contours);
        initArrayBuffer(polyTriangles);

        draw(filledMode, [0.1, 0.8, 0.08, 1.0]);

        for(var i=0; i<contours.length; i++){
          var contour = contours[i];
          initArrayBuffer(contour);
          draw(false, [0, 0, 0, 1.0]);
        }
      }

      function generateFunkyFreshLoop(count, ccw, radius, noiseSize) {
        var verts = new Array(count * 2);
        var thetaPer = Math.PI * 2 / count;
        var backwards = ccw ? -1 : 1;
        for (var i = 0; i < count; i++) {
          var theta = thetaPer * i * backwards;
          var randomRadius = radius * (1 + Math.sin(i/5+Math.cos(i+radius+noiseSize) / 2) * noiseSize);
          verts[i*2] = Math.cos(theta) * randomRadius;
          verts[i*2+1] = Math.sin(theta) * randomRadius;
        }

        return verts;
      }

      document.addEventListener('DOMContentLoaded', init, false);
    </script>
  </head>

  <body>
    <canvas id="poly-view" width="800" height="800"></canvas>
  
</body></html>